<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.1.0/material.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.material.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<style>
	.formulario {padding: 50px 70px 70px 71px;border-radius: 2px;
    margin: 10px auto 30px;background: #ffffff none repeat scroll 0 0;
    max-width: 38%;}

	</style>

	<title>Web Ventas</title>
</head>
<body style="background-color:#D6D0CF">


<div class='formulario'>

    <div class="container">
    <h1>Bienvenido</h1>
    <hr>
    <form method="post" id="login">
      <div class="input-field">
        <input type="text" class="validate" id="usuario" name="usuario" required>
        <label  for="usuario">Usuario</label>
      </div>
      <div class="input-field">
        <label class="mdl-textfield__label" for="password">Password</label>
        <input type="password"  class="validate" name="password" id="password" required>
      </div>




      <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Ingresar</button>
      <a class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" href='registrarse.html'>Registrarse</a>

    </form>

    </div>
    </div>










 	<script src="https://code.jquery.com/jquery-3.3.1.js" ></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" ></script>
    <script  src="https://cdn.datatables.net/1.10.19/js/dataTables.material.min.js"></script>


	<script>
	//En esta parte al momento de mostrar la tabla le asignamos la propiedad de datatable para poder tener el paginado correspondiente
	$(document).ready(function() {
    $('#files').DataTable( {
        columnDefs: [
            {
                targets: [ 0, 1, 2 ],
                className: 'mdl-data-table__cell--non-numeric'
            }
        ]
    } );
    $('#parts').DataTable( {
        columnDefs: [
            {
                targets: [ 0, 1, 2 ],
                className: 'mdl-data-table__cell--non-numeric'
            }
        ]
    } );
    $('.sidenav').sidenav();
     $('.modal').modal();
     $('.modal').modal();
    $('.datepicker').datepicker({
      format: 'dd-mm-yyyy'
    });
    $('select').formSelect();
    $("#login").submit(function(e) {

e.preventDefault(); //avoid to execute the actual submit of the form.

var form = $(this);
var url = "https://piezas-back.herokuapp.com/verifilog";
var url2 = "https://piezas-back.herokuapp.com/usersVerifi";

function validar(){

	$.ajax({
	    type: "POST",
	    url: url2,
	    data: form.serialize(), // serializes the form's elements.
	    success: function(data)
	    {

				//alert(JSON.stringify(data2.val))
	       if (data.val=="true"){
					  window.location.replace("home.html");
	        }else{
						sessionStorage.setItem("userlog", data.val2);

	        window.location.replace("index.html");
	        }
	    }

	  });

}




$.ajax({
    type: "POST",
    url: url,
    data: form.serialize(), // serializes the form's elements.
    success: function(data)
    {
       if (data.val=="true"){
        		validar()
        }else{
            alert("Usuario incorrecto");

        }
    }

  });




});


    }

);


</script>
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/5d143e3353d10a56bd7c0df5/default';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
</body>
</html>
